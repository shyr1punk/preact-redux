!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("preact"),require("redux")):"function"==typeof define&&define.amd?define(["preact","redux"],e):t.preactRedux=e(t.preact,t.Redux)}(this,function(t,e){function n(){}function r(){B||(B=!0)}function o(t,e,n){if("string"!=typeof e){if(tt){var r=$(e);r&&r!==tt&&o(t,r,n)}var i=X(e);Y&&(i=i.concat(Y(e)));for(var s=0;s<i.length;++s){var u=i[s];if(!(L[u]||Q[u]||n&&n[u])){var p=Z(e,u);try{V(t,u,p)}catch(t){}}}return t}return t}function i(){var t=[],e=[];return{clear:function(){e=nt,t=nt},notify:function(){for(var n=t=e,r=0;r<n.length;r++)n[r]()},get:function(){return e},subscribe:function(n){var r=!0;return e===t&&(e=t.slice()),e.push(n),function(){r&&t!==nt&&(r=!1,e===t&&(e=t.slice()),e.splice(e.indexOf(n),1))}}}}function s(){}function u(t,e){var n={run:function(r){try{var o=t(e.getState(),r);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}function p(e){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.getDisplayName,p=void 0===i?function(t){return"ConnectAdvanced("+t+")"}:i,c=o.methodName,a=void 0===c?"connectAdvanced":c,d=o.renderCountProp,f=void 0===d?void 0:d,l=o.shouldHandleStateChanges,h=void 0===l||l,b=o.storeKey,y=void 0===b?"store":b,v=o.withRef,m=void 0!==v&&v,P=J(o,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),O=y+"Subscription",S=it++,g=(n={},n[y]=A,n[O]=H,n),w=(r={},r[O]=H,r);return function(n){JSON.stringify(n);var r=n.displayName||n.name||"Component",o=p(r),i=K({},P,{getDisplayName:p,methodName:a,renderCountProp:f,shouldHandleStateChanges:h,storeKey:y,withRef:m,displayName:o,wrappedComponentName:r,WrappedComponent:n}),c=function(r){function o(t,e){var n=z(this,r.call(this,t,e));return n.version=S,n.state={},n.renderCount=0,n.store=t[y]||e[y],n.propsMode=!!t[y],n.setWrappedInstance=n.setWrappedInstance.bind(n),n.initSelector(),n.initSubscription(),n}return k(o,r),o.prototype.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return t={},t[O]=e||this.context[O],t},o.prototype.componentDidMount=function(){h&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},o.prototype.componentWillReceiveProps=function(t){this.selector.run(t)},o.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},o.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=s,this.store=null,this.selector.run=s,this.selector.shouldComponentUpdate=!1},o.prototype.getWrappedInstance=function(){return this.wrappedInstance},o.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},o.prototype.initSelector=function(){this.selector=u(e(this.store.dispatch,i),this.store),this.selector.run(this.props)},o.prototype.initSubscription=function(){if(h){this.subscription=new ot(this.store,(this.propsMode?this.props:this.context)[O],this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},o.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(st)):this.notifyNestedSubs()},o.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},o.prototype.isSubscribed=function(){return!!this.subscription&&this.subscription.isSubscribed()},o.prototype.addExtraProps=function(t){if(!(m||f||this.propsMode&&this.subscription))return t;var e=K({},t);return m&&(e.ref=this.setWrappedInstance),f&&(e[f]=this.renderCount++),this.propsMode&&this.subscription&&(e[O]=this.subscription),e},o.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return t.h(n,this.addExtraProps(e.props))},o}(t.Component);return c.WrappedComponent=n,c.displayName=o,c.childContextTypes=w,c.contextTypes=g,c.prototype.componentWillUpdate=function(){var t=this;if(this.version!==S){this.version=S,this.initSelector();var e=[];this.subscription&&(e=this.subscription.listeners.get(),this.subscription.tryUnsubscribe()),this.initSubscription(),h&&(this.subscription.trySubscribe(),e.forEach(function(e){return t.subscription.listeners.subscribe(e)}))}},et(c,n)}}function c(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!==t&&e!==e}function a(t,e){if(c(t,e))return!0;if("object"!==(void 0===t?"undefined":_(t))||null===t||"object"!==(void 0===e?"undefined":_(e))||null===e)return!1;var n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(var r=0;r<n.length;r++)if(!ut.call(e,n[r])||!c(t[n[r]],e[n[r]]))return!1;return!0}function d(t){var e=lt.call(t,bt),n=t[bt];try{t[bt]=void 0;var r=!0}catch(t){}var o=ht.call(t);return r&&(e?t[bt]=n:delete t[bt]),o}function f(t){return vt.call(t)}function l(t){return null==t?void 0===t?Pt:mt:Ot&&Ot in Object(t)?d(t):f(t)}function h(t){return null!=t&&"object"==(void 0===t?"undefined":_(t))}function b(t){if(!h(t)||l(t)!=gt)return!1;var e=St(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&jt.call(n)==Tt}function y(t){b(t)}function v(t){return function(e,n){function r(){return o}var o=t(e,n);return r.dependsOnOwnProps=!1,r}}function m(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?!!t.dependsOnOwnProps:1!==t.length}function P(t,e){return function(n,r){var o=r.displayName,i=function(t,e){return i.dependsOnOwnProps?i.mapToProps(t,e):i.mapToProps(t)};return i.dependsOnOwnProps=!0,i.mapToProps=function(n,r){i.mapToProps=t,i.dependsOnOwnProps=m(t);var s=i(n,r);return"function"==typeof s&&(i.mapToProps=s,i.dependsOnOwnProps=m(s),s=i(n,r)),y(s,o,e),s},i}}function O(t){return"function"==typeof t?P(t,"mapDispatchToProps"):void 0}function S(t){return t?void 0:v(function(t){return{dispatch:t}})}function g(t){return t&&"object"===(void 0===t?"undefined":_(t))?v(function(n){return e.bindActionCreators(t,n)}):void 0}function w(t){return"function"==typeof t?P(t,"mapStateToProps"):void 0}function C(t){return t?void 0:v(function(){return{}})}function j(t,e,n){return K({},n,t,e)}function N(t){return function(e,n){var r=n.displayName,o=n.pure,i=n.areMergedPropsEqual,s=!1,u=void 0;return function(e,n,p){var c=t(e,n,p);return s?o&&i(c,u)||(u=c):(s=!0,u=c,y(u,r,"mergeProps")),u}}}function T(t){return"function"==typeof t?N(t):void 0}function q(t){return t?void 0:function(){return j}}function E(t,e,n){if(!t)throw Error("Unexpected value for "+e+" in "+n+".");"mapStateToProps"!==e&&"mapDispatchToProps"!==e||t.hasOwnProperty("dependsOnOwnProps")}function x(t,e,n,r){E(t,"mapStateToProps",r),E(e,"mapDispatchToProps",r),E(n,"mergeProps",r)}function U(t,e,n,r){return function(o,i){return n(t(o,i),e(r,i),i)}}function D(t,e,n,r,o){function i(o,i){return h=o,b=i,y=t(h,b),v=e(r,b),m=n(y,v,b),l=!0,m}function s(){return y=t(h,b),e.dependsOnOwnProps&&(v=e(r,b)),m=n(y,v,b)}function u(){return t.dependsOnOwnProps&&(y=t(h,b)),e.dependsOnOwnProps&&(v=e(r,b)),m=n(y,v,b)}function p(){var e=t(h,b),r=!f(e,y);return y=e,r&&(m=n(y,v,b)),m}function c(t,e){var n=!d(e,b),r=!a(t,h);return h=t,b=e,n&&r?s():n?u():r?p():m}var a=o.areStatesEqual,d=o.areOwnPropsEqual,f=o.areStatePropsEqual,l=!1,h=void 0,b=void 0,y=void 0,v=void 0,m=void 0;return function(t,e){return l?c(t,e):i(t,e)}}function M(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,o=e.initMergeProps,i=J(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=n(t,i),u=r(t,i),p=o(t,i);return x(s,u,p,i.displayName),(i.pure?D:U)(s,u,p,t,i)}function R(t,e,n){for(var r=e.length-1;r>=0;r--){var o=e[r](t);if(o)return o}return function(e,r){throw Error("Invalid value of type "+(void 0===t?"undefined":_(t))+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function W(t,e){return t===e}var I={only:function(t){return t&&t[0]||null}};n.isRequired=n;var F={element:n,func:n,shape:function(){return n},instanceOf:function(){return n}},H=F.shape({trySubscribe:F.func.isRequired,tryUnsubscribe:F.func.isRequired,notifyNestedSubs:F.func.isRequired,isSubscribed:F.func.isRequired}),A=F.shape({subscribe:F.func.isRequired,dispatch:F.func.isRequired,getState:F.func.isRequired}),_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},J=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},z=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},B=!1,G=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",o=arguments[1],i=o||n+"Subscription",s=function(t){function e(e,r){var o=z(this,t.call(this,e,r));return o[n]=e.store,o}return k(e,t),e.prototype.getChildContext=function(){var t;return t={},t[n]=this[n],t[i]=null,t},e.prototype.render=function(){return I.only(this.props.children)},e}(t.Component);return s.prototype.componentWillReceiveProps=function(t){this[n]!==t.store&&r()},s.childContextTypes=(e={},e[n]=A.isRequired,e[i]=H,e),s}(),L={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Q={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},V=Object.defineProperty,X=Object.getOwnPropertyNames,Y=Object.getOwnPropertySymbols,Z=Object.getOwnPropertyDescriptor,$=Object.getPrototypeOf,tt=$&&$(Object),et=o,nt=null,rt={notify:function(){}},ot=function(){function t(t,e,n){this.store=t,this.parentSub=e,this.onStateChange=n,this.unsubscribe=null,this.listeners=rt}return t.prototype.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},t.prototype.notifyNestedSubs=function(){this.listeners.notify()},t.prototype.isSubscribed=function(){return!!this.unsubscribe},t.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=i())},t.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=rt)},t}(),it=0,st={},ut=Object.prototype.hasOwnProperty,pt="object"==("undefined"==typeof global?"undefined":_(global))&&global&&global.Object===Object&&global,ct="object"==("undefined"==typeof self?"undefined":_(self))&&self&&self.Object===Object&&self,at=pt||ct||Function("return this")(),dt=at.Symbol,ft=Object.prototype,lt=ft.hasOwnProperty,ht=ft.toString,bt=dt?dt.toStringTag:void 0,yt=Object.prototype,vt=yt.toString,mt="[object Null]",Pt="[object Undefined]",Ot=dt?dt.toStringTag:void 0,St=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),gt="[object Object]",wt=Function.prototype,Ct=Object.prototype,jt=wt.toString,Nt=Ct.hasOwnProperty,Tt=jt.call(Object),qt=[O,S,g],Et=[w,C],xt=[T,q];return{Provider:G,connect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.connectHOC,n=void 0===e?p:e,r=t.mapStateToPropsFactories,o=void 0===r?Et:r,i=t.mapDispatchToPropsFactories,s=void 0===i?qt:i,u=t.mergePropsFactories,c=void 0===u?xt:u,d=t.selectorFactory,f=void 0===d?M:d;return function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=i.pure,p=void 0===u||u,d=i.areStatesEqual,l=void 0===d?W:d,h=i.areOwnPropsEqual,b=void 0===h?a:h,y=i.areStatePropsEqual,v=void 0===y?a:y,m=i.areMergedPropsEqual,P=void 0===m?a:m,O=J(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),S=R(t,o,"mapStateToProps"),g=R(e,s,"mapDispatchToProps"),w=R(r,c,"mergeProps");return n(f,K({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:!!t,initMapStateToProps:S,initMapDispatchToProps:g,initMergeProps:w,pure:p,areStatesEqual:l,areOwnPropsEqual:b,areStatePropsEqual:v,areMergedPropsEqual:P},O))}}(),connectAdvanced:p}});
//# sourceMappingURL=preact-redux.min.js.map